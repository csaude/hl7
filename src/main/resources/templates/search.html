<!DOCTYPE HTML>
<html>

<head th:replace="~{base :: common_header(~{:: title},~{}) }">
  <title th:text="#{hl7.search.title}"></title>
</head>

<body th:replace="~{base :: common_body(~{:: .content}, ~{})}">

  <div class="content">

    <nav aria-label="breadcrumb"
      style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a th:href="@{/hl7}" th:text="#{hl7.nav.home}"></a></li>
        <li class="breadcrumb-item active" aria-current="page" th:text="${filename}"></li>
      </ol>
    </nav>

    <form th:object="${searchForm}" method="get" class="row row-cols-lg-auto g-3">
      <div class="col-12">
        <label class="visually-hidden" for="partialNid">NID</label>
        <input type="text" th:field="*{partialNid}" th:errorclass="is-invalid" class="form-control"
          placeholder="Nid Parcial do Paciente" aria-describedby="partialNidHelp">
        <div th:if="${not #fields.hasErrors('partialNid')}" id="partialNidHelp" class="form-text">
          Nid Parcial (exemplo: /2021/00001)
        </div>
        <div class="invalid-feedback" th:errors="*{partialNid}"></div>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-primary">Pesquisar</button>
      </div>
    </form>

    <br>

    <div th:if="${errorMessage}" th:text="${errorMessage}" class="alert alert-primary" role="alert"></div>

    <div th:if="${not #lists.isEmpty(hl7Patients)}">
      <table class="table table-striped table-hover table-bordered table-sm">
        <thead>
          <tr>
            <th>NID</th>
            <th>Nome</th>
            <th>Sobrenome</th>
            <th>Apelido</th>
            <th>Data de Nascimento</th>
            <th>Sexo</th>
            <th>Endereço</th>
            <th>Cidade</th>
            <th>Província</th>
          </tr>
        </thead>
        <tbody>
          <div th:each="patient : ${hl7Patients}">
            <tr>
              <td th:text=${patient.pid}></td>
              <td th:text=${patient.givenName}></td>
              <td th:text=${patient.middleName}></td>
              <td th:text=${patient.familyName}></td>
              <td th:text=${patient.birthDate}></td>
              <td th:text=${patient.gender}></td>
              <td th:text=${patient.address}></td>
              <td th:text=${patient.countryDistrict}></td>
              <td th:text=${patient.stateProvince}></td>
            </tr>
          </div>
        </tbody>
      </table>
    </div>
  </div>

</body>